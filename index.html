<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sandbagger Scoring</title>
  <link rel="stylesheet" href="style.css"/>
  <link rel="manifest" href="manifest.json">
  <!-- Capacitor import for native app features -->
  <script type="module" src="https://unpkg.com/@capacitor/core@latest/dist/capacitor.js"></script>
  <meta name="theme-color" content="#006837">
  <!-- Tell iOS to run in standalone mode -->
  <meta name="mobile-web-app-capable" content="yes">

  <!-- Status bar style: default, black, or black-translucent -->
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Home-screen icon (180×180 PNG is a good size) -->
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png">
    <link rel="icon" 
        href="favicon.png" 
        type="image/png">
</head>
<body>
<button id="btnInstall" style="display:none;">Install Sandbagger App</button>

<!-- Universal User Header Bar -->
<div id="user-header-bar" style="display: none;">
  <div class="user-header-content">
    <div class="user-info">
      <span id="user-header-name">Golfer Name</span>
    </div>
    <div class="hamburger-menu-container">
      <button id="hamburger-menu-btn" type="button" aria-label="Menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <div id="hamburger-dropdown" class="hamburger-dropdown">
        <button id="menu-dashboard" type="button">Dashboard</button>
        <button id="menu-my-history" type="button">My History</button>
        <button id="menu-edit-user" type="button">Edit User</button>
        <button id="menu-logout" type="button">Logout</button>
      </div>
    </div>
  </div>
</div>

<div id="auth-container" class="container">
        <form id="auth-form">
            <h2 class="form-title">Sandbagger Scoring</h2>
            <img class="form-logo" src="/images/purplegolficon.png" alt="Sandbagger Logo">

            <select id="selectUser" name="golfer_id" required>
              <option value="">-- Choose Golfer --</option>
              <option value="new">➕ Create New Golfer</option>
            </select>

            <!-- New Golfer Form -->
            <div id="new-golfer-form" style="display: none;">
              <input type="text" id="new-golfer-first-name" placeholder="First Name" style="width: 100%; padding: 0.5rem; font-size: 1rem; border-radius: 4px; border: 1px solid #ccc; box-sizing: border-box; margin-bottom: 0.5rem;">
              <input type="text" id="new-golfer-last-name" placeholder="Last Name" style="width: 100%; padding: 0.5rem; font-size: 1rem; border-radius: 4px; border: 1px solid #ccc; box-sizing: border-box; margin-bottom: 0.5rem;">
              <input type="number" id="new-golfer-handicap" placeholder="Handicap Index" step="0.1" style="width: 100%; padding: 0.5rem; font-size: 1rem; border-radius: 4px; border: 1px solid #ccc; box-sizing: border-box; margin-bottom: 0.5rem;">
              <input type="email" id="new-golfer-email" placeholder="Email (optional)" style="width: 100%; padding: 0.5rem; font-size: 1rem; border-radius: 4px; border: 1px solid #ccc; box-sizing: border-box;">
            </div>

            <button type="submit">Continue</button>
        </form>
        <div id="auth-message"></div>
</div>

<div id="user-dashboard" class="container" style="display: none;">
  <div id="dashboard-content">
    <!-- Tournaments Section -->
    <div id="tournaments-section" style="margin-bottom: 2rem;">
      <h3 style="border-bottom: 2px solid #4F2185; padding-bottom: 0.5rem;">Recent and Upcoming Tournaments</h3>
      <div id="tournaments-list"></div>
    </div>

    <!-- Quick Round Section -->
    <div id="quick-round-section" style="margin-bottom: 2rem;">
      <h3 style="border-bottom: 2px solid #4F2185; padding-bottom: 0.5rem;">Quick Round</h3>
      <div style="display: flex; flex-direction: column; gap: 0.5rem;">
        <button id="create-quick-round-btn" type="button">Create New Round</button>
      </div>
    </div>
  </div>
</div>

<div class="container" id="best-ball-setup" style="display: none;">
  <div id="best-ball-setup-content"></div>
</div>

<div class="container" id="quick-round-type-selector" style="display: none;">
  <h2 style="text-align: center; margin-bottom: 1rem;">Select Round Type</h2>
  <button id="back-from-round-type-btn" class="history-back-btn" style="margin-bottom: 1rem;">Back</button>

  <div style="max-width: 400px; margin: 0 auto;">
    <label for="round-type-select" style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Choose Round Type:</label>
    <select id="round-type-select" style="width: 100%; padding: 0.75rem; font-size: 1rem; border: 1px solid #ccc; border-radius: 4px; margin-bottom: 1rem;">
      <option value="">-- Select Round Type --</option>
      <option value="best-ball">Best Ball</option>
      <option value="rabbit">Rabbit</option>
      <option value="wolf">Wolf</option>
    </select>
    <button id="continue-round-type-btn" type="button" style="width: 100%; padding: 0.75rem; background: #4F2185; color: white; border: none; border-radius: 4px; font-size: 1rem; font-weight: bold; cursor: pointer;">Continue</button>
    <button id="cancel-round-type-btn" type="button" style="width: 100%; margin-top: 0.5rem; padding: 0.75rem; background: #ccc; color: #333; border: none; border-radius: 4px; font-size: 1rem; cursor: pointer;">Cancel</button>
  </div>
</div>

<div class="container" id="round-history-container" style="display: none;">
  <h2 style="text-align: center; margin-bottom: 1rem;">Round History</h2>
  <button id="back-from-history-btn" class="history-back-btn" style="margin-bottom: 1rem;">Back</button>
  <div id="round-history-content"></div>
</div>

<div class="container" id="tournament-history-container" style="display: none;">
  <h2 style="text-align: center; margin-bottom: 1rem;">Tournament History</h2>
  <button id="back-from-tournament-history-btn" class="history-back-btn" style="margin-bottom: 1rem;">Back</button>
  <div id="tournament-history-content"></div>
</div>

<div class="container" id="edit-user-container" style="display: none;">
  <h2 style="text-align: center; margin-bottom: 1rem;">Edit Profile</h2>
  <button id="back-from-edit-user-btn" class="history-back-btn" style="margin-bottom: 1rem;">Back</button>

  <form id="edit-user-form" style="max-width: 500px; margin: 0 auto;">
    <div style="margin-bottom: 1rem;">
      <label for="edit-first-name" style="display: block; margin-bottom: 0.5rem; font-weight: bold;">First Name *</label>
      <input type="text" id="edit-first-name" required style="width: 100%; padding: 0.75rem; font-size: 1rem; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box;">
    </div>

    <div style="margin-bottom: 1rem;">
      <label for="edit-last-name" style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Last Name *</label>
      <input type="text" id="edit-last-name" required style="width: 100%; padding: 0.75rem; font-size: 1rem; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box;">
    </div>

    <div style="margin-bottom: 1rem;">
      <label for="edit-handicap" style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Handicap Index *</label>
      <input type="number" id="edit-handicap" step="0.1" required style="width: 100%; padding: 0.75rem; font-size: 1rem; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box;">
    </div>

    <div style="margin-bottom: 1.5rem;">
      <label for="edit-email" style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Email</label>
      <input type="email" id="edit-email" style="width: 100%; padding: 0.75rem; font-size: 1rem; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box;">
      <small style="color: #666; font-size: 0.85rem;">Optional</small>
    </div>

    <button type="submit" style="width: 100%; padding: 0.75rem; background: #4F2185; color: white; border: none; border-radius: 4px; font-size: 1rem; font-weight: bold; cursor: pointer;">
      Save Changes
    </button>
  </form>

  <div id="edit-user-message" style="margin-top: 1rem; text-align: center;"></div>
</div>

<div class="container" id="app-content" style="display: none;">

  <header>
      <div id="tournament-bar" class="tournament-bar">
          <span id="tournament-name"></span>
      </div>
      <div id="user-bar" class="user-bar" style="display: none;">
        <span id="user-name" class="auto-contrast"></span>
        <button id="logout-button" class="btn-logout">Change Round</button>
      </div>

  </header>
  <nav>
    <div class="tabs">
      <button data-page="my-match">My Match</button>
      <button data-page="today">Round</button>
      <button data-page="tournament">Tournament</button>
    </div>

  </nav>


  <main id="content">
    <div id="score-entry-content" style="padding-bottom: 2rem;"></div>
  </main>
</div>  
  <script src="script.js"></script>
</body>
</html>
